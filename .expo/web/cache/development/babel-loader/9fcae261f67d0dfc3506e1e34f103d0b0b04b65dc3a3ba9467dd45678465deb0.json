{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from \"react\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport OutlinedButton from \"../UI/OutlinedButton\";\nimport { Colors } from \"../../constants/colors\";\nimport { getCurrentPositionAsync, useForegroundPermissions, PermissionStatus } from \"expo-location\";\nimport { getMapPreview } from \"../../util/location\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction LocationPicker() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    pickedLocation = _useState2[0],\n    setPickedLocation = _useState2[1];\n  var _useForegroundPermiss = useForegroundPermissions(),\n    _useForegroundPermiss2 = _slicedToArray(_useForegroundPermiss, 2),\n    locationpermissionInformation = _useForegroundPermiss2[0],\n    requestPermission = _useForegroundPermiss2[1];\n  function verifyPermissions() {\n    return _verifyPermissions.apply(this, arguments);\n  }\n  function _verifyPermissions() {\n    _verifyPermissions = _asyncToGenerator(function* () {\n      if (locationpermissionInformation.status === PermissionStatus.UNDETERMINED) {\n        var permissionResponse = yield requestPermission();\n        return permissionResponse.granted;\n      }\n      if (locationpermissionInformation === PermissionStatus.DENIED) {\n        Alert.alert(\"Insufficient Permissions\", \"You need to grant location permissions to use this app.\");\n        return false;\n      }\n      return true;\n    });\n    return _verifyPermissions.apply(this, arguments);\n  }\n  function getLocationHandler() {\n    return _getLocationHandler.apply(this, arguments);\n  }\n  function _getLocationHandler() {\n    _getLocationHandler = _asyncToGenerator(function* () {\n      var hasPermission = yield verifyPermissions();\n      if (!hasPermission) {\n        return;\n      }\n      var location = yield getCurrentPositionAsync();\n      setPickedLocation({\n        lat: location.coords.latitude,\n        lng: location.coords.longitude\n      });\n    });\n    return _getLocationHandler.apply(this, arguments);\n  }\n  function pickOnMapHandler() {}\n  return _jsxs(View, {\n    children: [_jsx(View, {\n      style: styles.mapPreview,\n      children: _jsx(Image, {\n        source: {\n          uri: getMapPreview(pickedLocation.lat, pickedLocation.lng)\n        }\n      })\n    }), _jsxs(View, {\n      style: styles.actions,\n      children: [_jsx(OutlinedButton, {\n        icon: \"location\",\n        onPress: getLocationHandler,\n        children: \"Locate User\"\n      }), _jsx(OutlinedButton, {\n        icon: \"map\",\n        onPress: pickOnMapHandler,\n        children: \"Pick on Map\"\n      })]\n    })]\n  });\n}\nexport default LocationPicker;\nvar styles = StyleSheet.create({\n  mapPreview: {\n    width: \"100%\",\n    height: 200,\n    marginVertical: 8,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: Colors.primary100,\n    borderRadius: 4\n  },\n  actions: {\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"names":["React","useState","Alert","Image","StyleSheet","View","OutlinedButton","Colors","getCurrentPositionAsync","useForegroundPermissions","PermissionStatus","getMapPreview","jsx","_jsx","jsxs","_jsxs","LocationPicker","_useState","_useState2","_slicedToArray","pickedLocation","setPickedLocation","_useForegroundPermiss","_useForegroundPermiss2","locationpermissionInformation","requestPermission","verifyPermissions","_verifyPermissions","apply","arguments","_asyncToGenerator","status","UNDETERMINED","permissionResponse","granted","DENIED","alert","getLocationHandler","_getLocationHandler","hasPermission","location","lat","coords","latitude","lng","longitude","pickOnMapHandler","children","style","styles","mapPreview","source","uri","actions","icon","onPress","create","width","height","marginVertical","justifyContent","alignItems","backgroundColor","primary100","borderRadius","flexDirection"],"sources":["/Users/dijgtal/Desktop/UDEMY/react native course/section 12/react_native_my_places/components/Places/LocationPicker.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Alert, Image, StyleSheet, View } from \"react-native\";\nimport OutlinedButton from \"../UI/OutlinedButton\";\nimport { Colors } from \"../../constants/colors\";\nimport {\n  getCurrentPositionAsync,\n  useForegroundPermissions,\n  PermissionStatus,\n} from \"expo-location\";\nimport { getMapPreview } from \"../../util/location\";\n\nfunction LocationPicker() {\n  const [pickedLocation, setPickedLocation] = useState(null);\n  const [locationpermissionInformation, requestPermission] =\n    useForegroundPermissions();\n\n  async function verifyPermissions() {\n    if (\n      locationpermissionInformation.status === PermissionStatus.UNDETERMINED\n    ) {\n      const permissionResponse = await requestPermission();\n      return permissionResponse.granted;\n    }\n\n    if (locationpermissionInformation === PermissionStatus.DENIED) {\n      Alert.alert(\n        \"Insufficient Permissions\",\n        \"You need to grant location permissions to use this app.\"\n      );\n\n      return false;\n    }\n\n    return true;\n  }\n  async function getLocationHandler() {\n    const hasPermission = await verifyPermissions();\n    if (!hasPermission) {\n      return;\n    }\n    const location = await getCurrentPositionAsync();\n    setPickedLocation({\n      lat: location.coords.latitude,\n      lng: location.coords.longitude,\n    });\n  }\n  function pickOnMapHandler() {}\n  return (\n    <View>\n      <View style={styles.mapPreview}>\n        <Image\n          source={{\n            uri: getMapPreview(pickedLocation.lat, pickedLocation.lng),\n          }}\n        />\n      </View>\n      <View style={styles.actions}>\n        <OutlinedButton icon=\"location\" onPress={getLocationHandler}>\n          Locate User\n        </OutlinedButton>\n        <OutlinedButton icon=\"map\" onPress={pickOnMapHandler}>\n          Pick on Map\n        </OutlinedButton>\n      </View>\n    </View>\n  );\n}\n\nexport default LocationPicker;\n\nconst styles = StyleSheet.create({\n  mapPreview: {\n    width: \"100%\",\n    height: 200,\n    marginVertical: 8,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: Colors.primary100,\n    borderRadius: 4,\n  },\n  actions: {\n    flexDirection: \"row\",\n    justifyContent: \"space-around\",\n    alignItems: \"center\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}